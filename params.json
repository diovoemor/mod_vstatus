{"name":"Mod_vstatus","tagline":"Apache module for displaying HTTP error Codes for virtual hosts","body":"#mod_vstatus\r\n\r\n### statistic tool for managing vhosts in apache2\r\nmod vstatus is a tool to collect apache requests summarized by vhost and status-code.\r\n\r\n##Highlights\r\n  - highly configurable\r\n  - different output styles (csv,google charts, html)\r\n  - filter by status code\r\n\r\n\r\n##example output\r\n\r\n###csv\r\n\r\n    Time,Host,Total,1xx,2xx,3xx,4xx,5xx,100,101,200,201,202,203,204,205,206,300,301,302,303,304,305,306,307,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,500,501,502,503,504,505\r\n    1394439580,Total,4497,0,3688,646,127,36,0,0,3182,0,0,0,0,0,506,0,531,3,2,110,0,0,0,1,97,0,0,10,0,0,0,19,0,0,0,0,0,0,0,0,0,36,0,0,0,0,0\r\n    1394439580,<UNNAMED>,122,0,103,0,19,0,0,0,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439580,<VHOST1>,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439580,<VHOST2>,347,0,343,4,0,0,0,0,343,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439580,<VHOST3>,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439565,Total,4497,0,3688,646,127,36,0,0,3182,0,0,0,0,0,506,0,531,3,2,110,0,0,0,1,97,0,0,10,0,0,0,19,0,0,0,0,0,0,0,0,0,36,0,0,0,0,0\r\n    1394439565,<UNNAMED>,122,0,103,0,19,0,0,0,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439565,<VHOST1>,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439565,<VHOST2>,347,0,343,4,0,0,0,0,343,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n    1394439565,<VHOST3>,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\r\n\r\n\r\n##Quick-start\r\n\r\n    checkout sourcecode\r\n    make\r\n    make install\r\n\r\n\r\nadd the following config directives to the apache config (e.g. /etc/apache2/http.conf)\r\n\r\n    <Location /vstatus>\r\n    \tSetHandler vstatus\r\n    \tOrder deny,allow\r\n    \tAllow from 127.0.0.0/255.0.0.0\r\n    \tAllow From 192.168.20.0/24\r\n    </Location>\r\n    \r\n    vstatusHistSize 120\t\t\t\t#log 120 values per vhost\r\n    vstatusGranularity 1\t\t\t# 1 second per log entry\r\n\t# time monitored = vstatusGranularity*vstatusHistSize = 120 seconds\r\n    \r\n    #vstatusFilter  <NAME> 0 1 2 3 4 5\t# summarize error-codes (0 = all errors, 1 = 1xx ...)\r\n    #vstatusFormat  <NAME> <format>\t\t# format=<csv,json,google,htmldumpcsv,dump-json>\r\n    #vstatusType    <NAME> abs\t\t\t# <abs|rel> show absolute or relative values\r\n    #vstatusComment <NAME> Test\t\t\t# comment\r\n\r\n    vstatusFilter  csv 0 1 2 3 4 404 5\t# summarize error-codes (0 = all errors, 1 = 1xx ...)\r\n    vstatusFormat  csv csv\r\n    vstatusType    csv abs\r\n    vstatusComment csv Test\r\n    \r\n    vstatusFilter  csv-rel 0 1 2 3 4 5\r\n    vstatusFormat  csv-rel csv\r\n    vstatusType    csv-rel rel\r\n    vstatusDelta   csv-rel 60\r\n    vstatusComment csv-rel \"Shows all, 1xx,2xx,3xx,4xx,5xx codes based on the last 60 seconds\"\r\n    \r\n    vstatusFilter  google 0 1 2 3 4 5\r\n    vstatusFormat  google google\r\n    vstatusDelta   google 60\r\n    vstatusComment google \"Data for google chart tools\"\r\n\r\n\r\n### Parameters\r\n\r\nFirst, there are two parameter, **vstatusHistSize** and **vstatusGranularity**. These parameters controlls, wow many data values are stored, and how often, they are renewed.\r\n\r\n**vstatusHistSize** controls, how many lines the data-table woll hold for each vhost.\r\ne.g. **vstatusHistSize** 120 will hold 120 lines for each vhost.\r\n\r\n**vstatusGranularity** will control the amount of time in seconds, a line will be active.\r\n\r\ne.g. **vstatusGranularity** 1 will create a new line every second.\r\n\r\nTherefor, vstatusHistSize 120 and vstatusGranularity 1 will hold data for two minutes\r\n\r\n\r\n### Filters\r\n\r\nFor getting the data stored in the internal table, you will need a filter. Filters requires several parameters.\r\n\r\nA Filter will be create on the fly, by naming it as the fist parameter i one of the following commands: **vstatusFilter**, **vstatusFormat**, **vstatusType**, **vstatusDelta**, **vstatusDelta**\r\n\r\n#### vstatusFilter\r\n**vstatusFilter <name> <filter>** declares, which response-codes will be exported.\r\n0 - summarize all status-codes (all hits)\r\n1 - summarize all 1xx-codes\r\n...\r\n5 - summarize all 5xx-codes\r\n\r\n100 - list all 100-codes\r\n404 - list all \"Page not found\" codes\r\n\r\n#### vstatusFormat\r\n**vstatusFormat <name> <format>** declares, how the data will be formatted\r\nvalid statements are:\r\n    html      - creates human readable output\r\n    csv       - creates csv-content <timestamp>,<vhost>,<codes as declared in vstatusFilter>\r\n    json      - creates a json-object containing the colelcted data.\r\n    google    - creates a google-json for using in google chart-tools\r\n    dump-json - dump the complete internal table as a json-object\r\n    dump-csv  - dump the complete internal table using csv-output\r\n    \r\n#### vstatusType\r\n**vstatusType <name> <type>** declares, if the data will be delta or absolut values\r\n<abs> - raw hits will be displayed. this counter will be resettet, if apache is restarted\r\n<rel> - delta hits. val = val(newest non-active line) - val(newest non-active line - vstatusDelta)\r\n\r\n#### vstatusDelta\r\n**vstatusDelta <name> <delta>** controls the timeperiod used for <vstatusType = rel>. If missing, 1 will be set\r\n\r\n#### vstatusComment\r\n**vstatusComment <name> <comment>** just a comment for the Filter. Shown in the overview-page\r\n\r\n### accessing the data\r\nAll data can be accessed via get-requests. The example defines a Location called \"vstatus\".\r\ngetting http://<ip>/vstatus will show you a overview-page with several informations including a list of all defined filters.\r\nClicking a filter will show you the data, defined by the filter.\r\n\r\n\r\n\r\n###Author - [Christopher Kreitz](https://github.com/romses)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}